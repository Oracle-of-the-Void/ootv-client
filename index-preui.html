<!DOCTYPE html>

<html>
<head>
  <link rel="shortcut icon" href="res/favicon.ico" type="image/x-icon" />
  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
  <script src="https://www.jsviews.com/download/jsviews.min.js"></script>
  <script src="amazon-cognito-auth.min.js"></script>
  <script src="aws-cognito-sdk.min.js"></script>
  <script src="oracle.js"></script>

  <!-- TODO:  dynamic this: -->
  <script src="templates/l5r.js"></script>
  
<!--  <link href="https://www.jsviews.com/samples/samples.css" rel="stylesheet" /> -->
  <LINK href="oracle.css" rel="stylesheet" type="text/css" />
  <style>
  label {display: inline-block; margin: 6px 15px 2px 0px;}
  </style>
</head>
<body>



<br clear="all" />

<input type="hidden" id="lastsearch" />
<input type="hidden" id="lastsearchquery" />
<input type="hidden" id="lastsearchsort" />


<div class="searchinput" id="searchinput">

<div class="logo"> <img width="75" src="res/logo.png"> </div>
<div id="logarea"><span id="loginfo"> </span>
<span class="button gray" id="loginbutton" onclick="dologin();" style="display: none;">Log In</span>
<span class="button gray" id="logoutbutton" onclick="dologout();" style="display: none;">Log Out</span>
</div>
<br clear="all">

<form id="searchform" method="POST" onsubmit="dosearch(); return false;" action="">
<dl>
<div id="searchtop"><dt>All</dt><dd><input type="text" name="querystring" id="qs" autofocus /></dd></div>
<div id="searchmiddle"></div>
</dl>
<div id="searchbottom">
<span class="button gray" onclick="dosearch();">Search <span class="iiconic iyellow">&#9889;</span></span>
</div></div>
</form>
</div>

<br clear="all" />


<div class="cardinfo" id="cardinfo"></div>

<div class="searchresult" id="searchresult">
<!-- TODO:    integrate this documentation into stuff -->
<br><br>
<div class="randarea">
<div class="helloplace"></div>
<br /><div class="infoplace">
Welcome to the L5R Oracle of the Void Database
<br>
<br>

After Legend of the Five Rings was sold to Fantasy Flight at the end of 2015, Don Eisele (Author of the Oracle of the Void) has continued to fund and run the Oracle of the Void.  He is currently working on revamping and coding the Oracle into a serverless cloud architecture on AWS.  The new version will be faster, more resiliant (not running in Don's basement), and support other games.
<br>
<br>
<br>

If you like the Oracle of the Void, please Like our Facebook page: <br>
<a href="https://www.facebook.com/pg/oracleofthevoid" target="_new">
<img src="/res/social-facebook.png" width="300px"> </a>
<br>
<br>
<br>
Join us on Discord to discuss future plans, or just hang out: <br>
<a href="https://discord.gg/3ahYmwn" target="_new">
<img src="/res/social-discord.png" width="300px"> </a>
<br>
<br>
<br>
Consider donating to the Oracle's Patreon to support the effort:<br>
<a href="https://www.patreon.com/oracleofthevoid" target="_new">
<img src="/res/social-patreon.png" width="300px"> </a>
<br><br>
</div>
<br />
<div class="infoplace">
<ul>
<li>Not everything is completely set yet, so if you have feedback let me know.
<li>All search boxes are logically AND'ed together.
<li>Title is a "match" field.   Individual words are matched against the title.
<li>Keywords is a "match phrase" field.  The complete phrase is matched.
<li>The Pull-down fields are self-explanatory
<li>The ALL field is where the true search power is.
<li>Results are agressively cached
<li>Infinite scrolling, loads more on demand (currently 10 items a load for debugging - will be larger in production)
</ul>

All:  <a target="_blank" href="http://lucene.apache.org/core/3_0_3/queryparsersyntax.html">Lucene search format:</a><br>
<dl>
<dt>Boolean
<dd><code>+keywords:"dark virtue" +text:reaction -title:determination</code>  (note: default is ANDing terms)
<dt>English
<dd><code>keywords:"dark virtue" AND text:reaction AND NOT title:determination</code>
<dt>Parenthesis
<dd><code>clan:crab AND (force:10 OR chi:6)</code>
<dt>backslash<dd><code>+ - && || ! ( ) { } [ ] ^  ~ * ? : \ (double-quote)</code>
<dt>fuzzy<dd><code>title:otaku~</code> will also find utaku card titles
<dt>slop<dd><code>title:"oni no"~2</code> will find "oni no" and "no oni" titles
<dt>gt/lt<dd><code>force:>15</code> will find cards greater than 15 force
</dl>

Each card has an entry with different printings nested under "printing"<br>
List of fields:
<pre>
banned
chi
clan
cost
deck
erratum
focus
force
formattedtitle
honor
cardid
keywords
legality
mrp
notes
ph
playtestname
production
startinghonor
story
strength
text
title
type
printingprimary

  printing:
     artist
     artnumber
     designer
     designernotes
     legaldate
     number
     printedtext
     printedwithset
     promoquantity
     rarity
     set
     use
     printingid

     printingchi
     printingclan
     printingcost
     printingflavor
     printingfocus
     printingforce
     printinghonor
     printingkeywords
     printingnotes
     printingpersonalhonor
     printingstory
     printingtext
     printingtitle
     printingtype
 </pre>
</div>

</div>
</div>

<div id="all_template">

<script id="template-hello" type="text/x-jsrender">
<div class="helloplace">
  <div class="upperhead">Welcome: {{:cognito.name}}</div>
  <strong>Profile Information</strong>
  <dl>
    <dt>Joined</dt><dd>{{formatDate:oracle.insert_date}}</dd>
    <dt>Uid</dt><dd>{{:oracle.uid}}</dd>
    <dt>Emails</dt><dd>{{:oracle.emails.join("<br/>")}}</dd>
    <dt></dt><dd>{{if oracle.is_no_email>0}}Email Notifications Disabled{{else}}Email Notifications Enabled{{/if}}</dd>
    <dt>Lists</dt><dd>{{:oracle.deckcount}} lists defined</dd>
  </dl>
</div>
</script>

</div>

</body>
</html>

